<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="682.5px" preserveAspectRatio="none" style="width:1135px;height:682px;background:#FFFFFF;" version="1.1" viewBox="0 0 1135 682" width="1135px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="585.3652" style="stroke:#181818;stroke-width:0.5;" width="5" x="21.25" y="46.8105"/><rect fill="#FFFFFF" height="573.7197" style="stroke:#181818;stroke-width:0.5;" width="5" x="180.75" y="58.4561"/><rect fill="#FFFFFF" height="542.4287" style="stroke:#181818;stroke-width:0.5;" width="5" x="537.75" y="74.1016"/><rect fill="#FFFFFF" height="317.6826" style="stroke:#181818;stroke-width:0.5;" width="5" x="540.25" y="272.7021"/><rect fill="#FFFFFF" height="195.8096" style="stroke:#181818;stroke-width:0.5;" width="5" x="542.75" y="294.8477"/><rect fill="#FFFFFF" height="15.6455" style="stroke:#181818;stroke-width:0.5;" width="5" x="851.75" y="121.0381"/><rect fill="#FFFFFF" height="15" style="stroke:#181818;stroke-width:0.5;" width="5" x="897.5" y="401.5752"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:0.5;" width="5" x="993.75" y="105.3926"/><rect fill="#FFFFFF" height="15.6455" style="stroke:#181818;stroke-width:0.5;" width="5" x="1118.75" y="89.7471"/><rect fill="none" height="422.5557" style="stroke:#000000;stroke-width:0.75;" width="458.5" x="471.5" y="178.8291"/><rect fill="none" height="405.9102" style="stroke:#000000;stroke-width:0.75;" width="448.5" x="476.5" y="191.9746"/><rect fill="none" height="48.4365" style="stroke:#000000;stroke-width:0.75;" width="158.5" x="481.5" y="205.1201"/><rect fill="none" height="31.791" style="stroke:#000000;stroke-width:0.75;" width="148.5" x="486.5" y="218.2656"/><rect fill="none" height="48.4365" style="stroke:#000000;stroke-width:0.75;" width="377.75" x="481.5" y="424.0752"/><rect fill="none" height="31.791" style="stroke:#000000;stroke-width:0.75;" width="367.75" x="486.5" y="437.2207"/><rect fill="none" height="48.4365" style="stroke:#000000;stroke-width:0.75;" width="280" x="481.5" y="523.8027"/><rect fill="none" height="31.791" style="stroke:#000000;stroke-width:0.75;" width="270" x="486.5" y="536.9482"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="23.5" x2="23.5" y1="41.8105" y2="641.1758"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="183" x2="183" y1="41.8105" y2="641.1758"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="540" x2="540" y1="41.8105" y2="641.1758"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="854" x2="854" y1="41.8105" y2="641.1758"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="900" x2="900" y1="41.8105" y2="641.1758"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="996.25" x2="996.25" y1="41.8105" y2="641.1758"/><line style="stroke:#181818;stroke-width:0.25;stroke-dasharray:5.0,5.0;" x1="1121" x2="1121" y1="41.8105" y2="641.1758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="39.5" x="2.5" y="40.0537">System User</text><ellipse cx="23.75" cy="6.75" fill="#E2E2F0" rx="4" ry="4" style="stroke:#181818;stroke-width:0.25;"/><path d="M23.75,10.75 L23.75,24.25 M17.25,14.75 L30.25,14.75 M23.75,24.25 L17.25,31.75 M23.75,24.25 L30.25,31.75 " fill="none" style="stroke:#181818;stroke-width:0.25;"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="39.5" x="2.5" y="648.2295">System User</text><ellipse cx="23.75" cy="654.2363" fill="#E2E2F0" rx="4" ry="4" style="stroke:#181818;stroke-width:0.25;"/><path d="M23.75,658.2363 L23.75,671.7363 M17.25,662.2363 L30.25,662.2363 M23.75,671.7363 L17.25,679.2363 M23.75,671.7363 L30.25,679.2363 " fill="none" style="stroke:#181818;stroke-width:0.25;"/><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="72.5" x="147" y="25"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="65.5" x="150.5" y="36.0537">:DefineNearestHubUI</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="72.5" x="147" y="640.6758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="65.5" x="150.5" y="651.7295">:DefineNearestHubUI</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="97.5" x="491.5" y="25"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="90.5" x="495" y="36.0537">:DefineNearestHubController</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="97.5" x="491.5" y="640.6758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="90.5" x="495" y="651.7295">:DefineNearestHubController</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="41.5" x="833.5" y="25"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="34.5" x="837" y="36.0537">EntityStore</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="41.5" x="833.5" y="640.6758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="34.5" x="837" y="651.7295">EntityStore</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="40" x="880" y="25"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="33" x="883.5" y="36.0537">Algorithms</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="40" x="880" y="640.6758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="33" x="883.5" y="651.7295">Algorithms</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="49" x="971.75" y="25"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="42" x="975.25" y="36.0537">:Organization</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="49" x="971.75" y="640.6758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="42" x="975.25" y="651.7295">:Organization</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="21.5" x="1110.5" y="25"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="14.5" x="1114" y="36.0537">:App</text><rect fill="#E2E2F0" height="16.3105" rx="1.25" ry="1.25" style="stroke:#181818;stroke-width:0.25;" width="21.5" x="1110.5" y="640.6758"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="14.5" x="1114" y="651.7295">:App</text><rect fill="#FFFFFF" height="585.3652" style="stroke:#181818;stroke-width:0.5;" width="5" x="21.25" y="46.8105"/><rect fill="#FFFFFF" height="573.7197" style="stroke:#181818;stroke-width:0.5;" width="5" x="180.75" y="58.4561"/><rect fill="#FFFFFF" height="542.4287" style="stroke:#181818;stroke-width:0.5;" width="5" x="537.75" y="74.1016"/><rect fill="#FFFFFF" height="317.6826" style="stroke:#181818;stroke-width:0.5;" width="5" x="540.25" y="272.7021"/><rect fill="#FFFFFF" height="195.8096" style="stroke:#181818;stroke-width:0.5;" width="5" x="542.75" y="294.8477"/><rect fill="#FFFFFF" height="15.6455" style="stroke:#181818;stroke-width:0.5;" width="5" x="851.75" y="121.0381"/><rect fill="#FFFFFF" height="15" style="stroke:#181818;stroke-width:0.5;" width="5" x="897.5" y="401.5752"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:0.5;" width="5" x="993.75" y="105.3926"/><rect fill="#FFFFFF" height="15.6455" style="stroke:#181818;stroke-width:0.5;" width="5" x="1118.75" y="89.7471"/><polygon fill="#181818" points="174.75,56.4561,179.75,58.4561,174.75,60.4561,176.75,58.4561" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="26.25" x2="177.75" y1="58.4561" y2="58.4561"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="29.75" y="55.8247">1</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="134" x="35.25" y="55.8247">requests to find the nearest hub for each client</text><polygon fill="#181818" points="531.75,72.1016,536.75,74.1016,531.75,76.1016,533.75,74.1016" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="185.75" x2="534.75" y1="74.1016" y2="74.1016"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="189.25" y="71.4702">2</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="337" x="194.75" y="71.4702">List&lt;Pair&lt;Entity, Pair&lt;Company, Integer&gt;&gt;&gt; clientNearestList = controller.getNearestDistributionHubForEachClient()</text><polygon fill="#181818" points="1112.75,87.7471,1117.75,89.7471,1112.75,91.7471,1114.75,89.7471" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="542.75" x2="1115.75" y1="89.7471" y2="89.7471"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="546.25" y="87.1157">3</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="69.5" x="551.75" y="87.1157">app = App.getInstance()</text><polygon fill="#181818" points="1004.25,103.3926,999.25,105.3926,1004.25,107.3926,1002.25,105.3926" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1001.25" x2="1120.75" y1="105.3926" y2="105.3926"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="1007.25" y="102.7612">4</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="105" x="1012.75" y="102.7612">organization = app.getOrganization()</text><polygon fill="#181818" points="862.25,119.0381,857.25,121.0381,862.25,123.0381,860.25,121.0381" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="859.25" x2="993.25" y1="121.0381" y2="121.0381"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="865.25" y="118.4067">5</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="122" x="870.75" y="118.4067">entityStore = organization.getEntityStore()</text><polygon fill="#181818" points="548.25,134.6836,543.25,136.6836,548.25,138.6836,546.25,136.6836" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="545.25" x2="853.75" y1="136.6836" y2="136.6836"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="551.25" y="134.0522">6</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="124" x="556.75" y="134.0522">MapGraph = entityStore.getEntitiesGraph()</text><line style="stroke:#181818;stroke-width:0.5;" x1="542.75" x2="563.75" y1="164.8291" y2="164.8291"/><line style="stroke:#181818;stroke-width:0.5;" x1="563.75" x2="563.75" y1="164.8291" y2="171.3291"/><line style="stroke:#181818;stroke-width:0.5;" x1="543.25" x2="563.75" y1="171.3291" y2="171.3291"/><polygon fill="#181818" points="548.25,169.3291,543.25,171.3291,548.25,173.3291,546.25,171.3291" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="546.25" y="162.1978">7</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="293.5" x="551.75" y="162.1978">List&lt;Pair&lt;Entity, Pair&lt;Company, Integer&gt;&gt;&gt; nearestDistributionHubForAllClients = new ArrayList&lt;&gt;()</text><path d="M471.5,178.8291 L508,178.8291 L508,183.4746 L503,188.4746 L471.5,188.4746 L471.5,178.8291 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="422.5557" style="stroke:#000000;stroke-width:0.75;" width="458.5" x="471.5" y="178.8291"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="14" x="479" y="186.3433">loop</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="161.5" x="515.5" y="185.7642">[for each entity in entityStore.getEntitiesGraph().vertices()]</text><path d="M476.5,191.9746 L507,191.9746 L507,196.6201 L502,201.6201 L476.5,201.6201 L476.5,191.9746 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="405.9102" style="stroke:#000000;stroke-width:0.75;" width="448.5" x="476.5" y="191.9746"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="8" x="484" y="199.4888">alt</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="88.5" x="514.5" y="198.9097">[(!(entity instanceof Productor))]</text><path d="M481.5,205.1201 L512,205.1201 L512,209.7656 L507,214.7656 L481.5,214.7656 L481.5,205.1201 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="48.4365" style="stroke:#000000;stroke-width:0.75;" width="158.5" x="481.5" y="205.1201"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="8" x="489" y="212.6343">alt</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="81.5" x="519.5" y="212.0552">[(entity instanceof Company)]</text><path d="M486.5,218.2656 L517,218.2656 L517,222.9111 L512,227.9111 L486.5,227.9111 L486.5,218.2656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="31.791" style="stroke:#000000;stroke-width:0.75;" width="148.5" x="486.5" y="218.2656"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="8" x="494" y="225.7798">alt</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="108" x="524.5" y="225.2007">[((Company) entity).isDistributionHub()]</text><line style="stroke:#181818;stroke-width:0.5;" x1="542.75" x2="563.75" y1="239.5566" y2="239.5566"/><line style="stroke:#181818;stroke-width:0.5;" x1="563.75" x2="563.75" y1="239.5566" y2="246.0566"/><line style="stroke:#181818;stroke-width:0.5;" x1="543.25" x2="563.75" y1="246.0566" y2="246.0566"/><polygon fill="#181818" points="548.25,244.0566,543.25,246.0566,548.25,248.0566,546.25,246.0566" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="546.25" y="236.9253">8</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="24.5" x="551.75" y="236.9253">continue</text><line style="stroke:#181818;stroke-width:0.5;" x1="542.75" x2="566.25" y1="266.2021" y2="266.2021"/><line style="stroke:#181818;stroke-width:0.5;" x1="566.25" x2="566.25" y1="266.2021" y2="272.7021"/><line style="stroke:#181818;stroke-width:0.5;" x1="545.75" x2="566.25" y1="272.7021" y2="272.7021"/><polygon fill="#181818" points="550.75,270.7021,545.75,272.7021,550.75,274.7021,548.75,272.7021" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="548.75" y="263.5708">9</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="95.5" x="554.25" y="263.5708">getNearestDistributionHub(entity)</text><line style="stroke:#181818;stroke-width:0.5;" x1="545.25" x2="568.75" y1="288.3477" y2="288.3477"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="288.3477" y2="294.8477"/><line style="stroke:#181818;stroke-width:0.5;" x1="548.25" x2="568.75" y1="294.8477" y2="294.8477"/><polygon fill="#181818" points="553.25,292.8477,548.25,294.8477,553.25,296.8477,551.25,294.8477" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="285.7163">10</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="124" x="560.25" y="285.7163">getEntityReachableDistributionHubs(entity)</text><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="568.75" y1="312.9932" y2="312.9932"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="312.9932" y2="319.4932"/><line style="stroke:#181818;stroke-width:0.5;" x1="548.25" x2="568.75" y1="319.4932" y2="319.4932"/><polygon fill="#181818" points="553.25,317.4932,548.25,319.4932,553.25,321.4932,551.25,319.4932" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="310.3618">11</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="226" x="560.25" y="310.3618">List&lt;Pair&lt;Company, Integer&gt;&gt; reachableDistributionHubs = new ArrayList&lt;&gt;()</text><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="568.75" y1="335.1387" y2="335.1387"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="335.1387" y2="341.6387"/><line style="stroke:#181818;stroke-width:0.5;" x1="548.25" x2="568.75" y1="341.6387" y2="341.6387"/><polygon fill="#181818" points="553.25,339.6387,548.25,341.6387,553.25,343.6387,551.25,341.6387" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="332.5073">12</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="208" x="560.25" y="332.5073">MapGraph&lt;Entity, Integer&gt; entityGraph = entityStore.getEntitiesGraph()</text><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="568.75" y1="357.2842" y2="357.2842"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="357.2842" y2="363.7842"/><line style="stroke:#181818;stroke-width:0.5;" x1="548.25" x2="568.75" y1="363.7842" y2="363.7842"/><polygon fill="#181818" points="553.25,361.7842,548.25,363.7842,553.25,365.7842,551.25,363.7842" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="354.6528">13</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="166" x="560.25" y="354.6528">ArrayList&lt;LinkedList&lt;Entity&gt;&gt; paths = new ArrayList&lt;&gt;()</text><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="568.75" y1="379.4297" y2="379.4297"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="379.4297" y2="385.9297"/><line style="stroke:#181818;stroke-width:0.5;" x1="548.25" x2="568.75" y1="385.9297" y2="385.9297"/><polygon fill="#181818" points="553.25,383.9297,548.25,385.9297,553.25,387.9297,551.25,385.9297" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="376.7983">14</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="160" x="560.25" y="376.7983">ArrayList&lt;Integer&gt; pathsDistances = new ArrayList&lt;&gt;()</text><polygon fill="#181818" points="891.5,399.5752,896.5,401.5752,891.5,403.5752,893.5,401.5752" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="894.5" y1="401.5752" y2="401.5752"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="398.9438">15</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="305" x="560.25" y="398.9438">Algorithms.shortestPaths(entityGraph, entity, Integer::compareTo, Integer::sum,0, paths, pathsDistances)</text><path d="M481.5,424.0752 L518,424.0752 L518,428.7207 L513,433.7207 L481.5,433.7207 L481.5,424.0752 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="48.4365" style="stroke:#000000;stroke-width:0.75;" width="377.75" x="481.5" y="424.0752"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="14" x="489" y="431.5894">loop</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="90" x="525.5" y="431.0103">[for (int i = 0; i &lt; paths.size(); i++)]</text><path d="M486.5,437.2207 L517,437.2207 L517,441.8662 L512,446.8662 L486.5,446.8662 L486.5,437.2207 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="31.791" style="stroke:#000000;stroke-width:0.75;" width="367.75" x="486.5" y="437.2207"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="8" x="494" y="444.7349">alt</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="281.5" x="524.5" y="444.1558">[(paths.get(i).getLast() instanceof Company &amp;&amp; ((Company) paths.get(i).getLast()).isDistributionHub())]</text><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="568.75" y1="458.5117" y2="458.5117"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="458.5117" y2="465.0117"/><line style="stroke:#181818;stroke-width:0.5;" x1="548.25" x2="568.75" y1="465.0117" y2="465.0117"/><polygon fill="#181818" points="553.25,463.0117,548.25,465.0117,553.25,467.0117,551.25,465.0117" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="455.8804">16</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="288" x="560.25" y="455.8804">reachableDistributionHubs.add(new Pair&lt;&gt;((Company) paths.get(i).getLast(), pathsDistances.get(i)))</text><line style="stroke:#181818;stroke-width:0.5;" x1="547.75" x2="568.75" y1="490.1572" y2="490.1572"/><line style="stroke:#181818;stroke-width:0.5;" x1="568.75" x2="568.75" y1="490.1572" y2="496.6572"/><line style="stroke:#181818;stroke-width:0.5;" x1="545.25" x2="568.75" y1="496.6572" y2="496.6572"/><polygon fill="#181818" points="550.25,494.6572,545.25,496.6572,550.25,498.6572,548.25,496.6572" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="551.25" y="487.5259">17</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="75.5" x="560.25" y="487.5259">reachableDistributionHubs</text><line style="stroke:#181818;stroke-width:0.5;" x1="545.25" x2="566.25" y1="509.8027" y2="509.8027"/><line style="stroke:#181818;stroke-width:0.5;" x1="566.25" x2="566.25" y1="509.8027" y2="516.3027"/><line style="stroke:#181818;stroke-width:0.5;" x1="545.75" x2="566.25" y1="516.3027" y2="516.3027"/><polygon fill="#181818" points="550.75,514.3027,545.75,516.3027,550.75,518.3027,548.75,516.3027" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="548.75" y="507.1714">18</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="156" x="557.75" y="507.1714">Pair&lt;Company, Integer&gt; nearestDistributionHub = null</text><path d="M481.5,523.8027 L518,523.8027 L518,528.4482 L513,533.4482 L481.5,533.4482 L481.5,523.8027 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="48.4365" style="stroke:#000000;stroke-width:0.75;" width="280" x="481.5" y="523.8027"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="14" x="489" y="531.3169">loop</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="172.5" x="525.5" y="530.7378">[for (Pair&lt;Company, Integer&gt; pair : reachableDistributionHubs)]</text><path d="M486.5,536.9482 L517,536.9482 L517,541.5938 L512,546.5938 L486.5,546.5938 L486.5,536.9482 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="31.791" style="stroke:#000000;stroke-width:0.75;" width="270" x="486.5" y="536.9482"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="8" x="494" y="544.4624">alt</text><text fill="#000000" font-family="sans-serif" font-size="5.5" font-weight="bold" lengthAdjust="spacing" textLength="229.5" x="524.5" y="543.8833">[(nearestDistributionHub == null || pair.second() &lt; nearestDistributionHub.second())]</text><line style="stroke:#181818;stroke-width:0.5;" x1="545.25" x2="566.25" y1="558.2393" y2="558.2393"/><line style="stroke:#181818;stroke-width:0.5;" x1="566.25" x2="566.25" y1="558.2393" y2="564.7393"/><line style="stroke:#181818;stroke-width:0.5;" x1="545.75" x2="566.25" y1="564.7393" y2="564.7393"/><polygon fill="#181818" points="550.75,562.7393,545.75,564.7393,550.75,566.7393,548.75,564.7393" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="548.75" y="555.6079">19</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="84" x="557.75" y="555.6079">nearestDistributionHub = pair</text><line style="stroke:#181818;stroke-width:0.5;" x1="545.25" x2="566.25" y1="589.8848" y2="589.8848"/><line style="stroke:#181818;stroke-width:0.5;" x1="566.25" x2="566.25" y1="589.8848" y2="596.3848"/><line style="stroke:#181818;stroke-width:0.5;" x1="542.75" x2="566.25" y1="596.3848" y2="596.3848"/><polygon fill="#181818" points="547.75,594.3848,542.75,596.3848,547.75,598.3848,545.75,596.3848" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="548.75" y="587.2534">20</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="65.5" x="557.75" y="587.2534">nearestDistributionHub</text><polygon fill="#181818" points="191.25,614.5303,186.25,616.5303,191.25,618.5303,189.25,616.5303" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:2.0,2.0;" x1="188.25" x2="539.75" y1="616.5303" y2="616.5303"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="194.25" y="613.8989">21</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="16" x="203.25" y="613.8989">result</text><polygon fill="#181818" points="29.25,630.1758,24.25,632.1758,29.25,634.1758,27.25,632.1758" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:2.0,2.0;" x1="26.25" x2="182.75" y1="632.1758" y2="632.1758"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="32.25" y="629.5444">22</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="133.5" x="41.25" y="629.5444">shows the user the nearest hub for each client</text><!--MD5=[10f7c039c163ffc0ca0758485080a8f4]
@startuml
autonumber
'hide footbox
actor "System User" as ADM

participant ":DefineNearestHubUI" as UI
participant ":DefineNearestHubController" as CTRL
participant "EntityStore" as EST
participant "Algorithms" as ALG
participant ":Organization" as organization
participant ":App" as app

activate ADM

ADM -> UI : requests to find the nearest hub for each client
activate UI
UI -> CTRL : List<Pair<Entity, Pair<Company, Integer>>> clientNearestList = controller.getNearestDistributionHubForEachClient()
activate CTRL

CTRL -> app : app = App.getInstance()
activate app
app -> organization : organization = app.getOrganization()
deactivate app
activate organization
organization -> EST : entityStore = organization.getEntityStore()
activate EST
EST -> CTRL : MapGraph = entityStore.getEntitiesGraph()
deactivate EST
deactivate organization
|||
CTRL -> CTRL : List<Pair<Entity, Pair<Company, Integer>>> nearestDistributionHubForAllClients = new ArrayList<>()
loop for each entity in entityStore.getEntitiesGraph().vertices()
alt (!(entity instanceof Productor))
    alt (entity instanceof Company)
        alt ((Company) entity).isDistributionHub()
            CTRL -> CTRL : continue
        end
    end
    CTRL -> CTRL : getNearestDistributionHub(entity)
    activate CTRL
    CTRL -> CTRL : getEntityReachableDistributionHubs(entity)
    activate CTRL
    CTRL -> CTRL : List<Pair<Company, Integer>> reachableDistributionHubs = new ArrayList<>()
    CTRL -> CTRL : MapGraph<Entity, Integer> entityGraph = entityStore.getEntitiesGraph()
    CTRL -> CTRL : ArrayList<LinkedList<Entity>> paths = new ArrayList<>()
    CTRL -> CTRL : ArrayList<Integer> pathsDistances = new ArrayList<>()
    CTRL -> ALG : Algorithms.shortestPaths(entityGraph, entity, Integer::compareTo, Integer::sum,0, paths, pathsDistances)
    activate ALG
    deactivate ALG
    loop for (int i = 0; i < paths.size(); i++)
        alt (paths.get(i).getLast() instanceof Company && ((Company) paths.get(i).getLast()).isDistributionHub())
            CTRL -> CTRL : reachableDistributionHubs.add(new Pair<>((Company) paths.get(i).getLast(), pathsDistances.get(i)))
        end
    end 
    CTRL -> CTRL : reachableDistributionHubs
    deactivate CTRL
    CTRL -> CTRL : Pair<Company, Integer> nearestDistributionHub = null
    loop for (Pair<Company, Integer> pair : reachableDistributionHubs)
        alt (nearestDistributionHub == null || pair.second() < nearestDistributionHub.second())
            CTRL -> CTRL : nearestDistributionHub = pair
        end
    end
    CTRL -> CTRL : nearestDistributionHub
    deactivate CTRL 
end
end
CTRL - -> UI : result
deactivate CTRL

UI - -> ADM : shows the user the nearest hub for each client
deactivate UI
deactivate ADM

@enduml

@startuml
autonumber
actor "System User" as ADM

participant ":DefineNearestHubUI" as UI
participant ":DefineNearestHubController" as CTRL
participant "EntityStore" as EST
participant "Algorithms" as ALG
participant ":Organization" as organization
participant ":App" as app

activate ADM

ADM -> UI : requests to find the nearest hub for each client
activate UI
UI -> CTRL : List<Pair<Entity, Pair<Company, Integer>>> clientNearestList = controller.getNearestDistributionHubForEachClient()
activate CTRL

CTRL -> app : app = App.getInstance()
activate app
app -> organization : organization = app.getOrganization()
deactivate app
activate organization
organization -> EST : entityStore = organization.getEntityStore()
activate EST
EST -> CTRL : MapGraph = entityStore.getEntitiesGraph()
deactivate EST
deactivate organization
|||
CTRL -> CTRL : List<Pair<Entity, Pair<Company, Integer>>> nearestDistributionHubForAllClients = new ArrayList<>()
loop for each entity in entityStore.getEntitiesGraph().vertices()
alt (!(entity instanceof Productor))
    alt (entity instanceof Company)
        alt ((Company) entity).isDistributionHub()
            CTRL -> CTRL : continue
        end
    end
    CTRL -> CTRL : getNearestDistributionHub(entity)
    activate CTRL
    CTRL -> CTRL : getEntityReachableDistributionHubs(entity)
    activate CTRL
    CTRL -> CTRL : List<Pair<Company, Integer>> reachableDistributionHubs = new ArrayList<>()
    CTRL -> CTRL : MapGraph<Entity, Integer> entityGraph = entityStore.getEntitiesGraph()
    CTRL -> CTRL : ArrayList<LinkedList<Entity>> paths = new ArrayList<>()
    CTRL -> CTRL : ArrayList<Integer> pathsDistances = new ArrayList<>()
    CTRL -> ALG : Algorithms.shortestPaths(entityGraph, entity, Integer::compareTo, Integer::sum,0, paths, pathsDistances)
    activate ALG
    deactivate ALG
    loop for (int i = 0; i < paths.size(); i++)
        alt (paths.get(i).getLast() instanceof Company && ((Company) paths.get(i).getLast()).isDistributionHub())
            CTRL -> CTRL : reachableDistributionHubs.add(new Pair<>((Company) paths.get(i).getLast(), pathsDistances.get(i)))
        end
    end 
    CTRL -> CTRL : reachableDistributionHubs
    deactivate CTRL
    CTRL -> CTRL : Pair<Company, Integer> nearestDistributionHub = null
    loop for (Pair<Company, Integer> pair : reachableDistributionHubs)
        alt (nearestDistributionHub == null || pair.second() < nearestDistributionHub.second())
            CTRL -> CTRL : nearestDistributionHub = pair
        end
    end
    CTRL -> CTRL : nearestDistributionHub
    deactivate CTRL 
end
end
CTRL - -> UI : result
deactivate CTRL

UI - -> ADM : shows the user the nearest hub for each client
deactivate UI
deactivate ADM

@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>